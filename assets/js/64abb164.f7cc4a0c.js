"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[901],{6374:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>g,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"modules/module-1-robotic-nervous-system/lesson-3-bridging-python-agents/module-1-lesson-3-bridging-python-agents-readme","title":"Lesson 3: Bridging Python Agents to ROS Controllers using rclpy","description":"Overview","source":"@site/docs/modules/module-1-robotic-nervous-system/lesson-3-bridging-python-agents/README.md","sourceDirName":"modules/module-1-robotic-nervous-system/lesson-3-bridging-python-agents","slug":"/modules/module-1-robotic-nervous-system/lesson-3-bridging-python-agents/","permalink":"/Hackathons/docs/modules/module-1-robotic-nervous-system/lesson-3-bridging-python-agents/","draft":false,"unlisted":false,"editUrl":"https://github.com/mudasirsohail/Hackathons/docs/modules/module-1-robotic-nervous-system/lesson-3-bridging-python-agents/README.md","tags":[],"version":"current","frontMatter":{"id":"module-1-lesson-3-bridging-python-agents-readme"}}');var i=r(4848),t=r(8453);const o={id:"module-1-lesson-3-bridging-python-agents-readme"},a="Lesson 3: Bridging Python Agents to ROS Controllers using rclpy",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"The Bridge Between AI and Robotics",id:"the-bridge-between-ai-and-robotics",level:2},{value:"Understanding rclpy",id:"understanding-rclpy",level:2},{value:"Code Example: AI Agent Node",id:"code-example-ai-agent-node",level:2},{value:"Code Example: AI Agent with Service Call",id:"code-example-ai-agent-with-service-call",level:2},{value:"Best Practices for AI-ROS Integration",id:"best-practices-for-ai-ros-integration",level:2},{value:"Summary",id:"summary",level:2},{value:"Previous Steps",id:"previous-steps",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lesson-3-bridging-python-agents-to-ros-controllers-using-rclpy",children:"Lesson 3: Bridging Python Agents to ROS Controllers using rclpy"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"In this lesson, we'll explore how to bridge Python-based AI agents with ROS controllers using rclpy, the Python client library for ROS 2. This integration is crucial for creating intelligent robotic systems where AI agents make decisions that control robot behavior."}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Understand the role of rclpy in bridging Python agents and ROS systems"}),"\n",(0,i.jsx)(n.li,{children:"Create ROS nodes that interface with external Python code"}),"\n",(0,i.jsx)(n.li,{children:"Implement message passing between AI agents and ROS controllers"}),"\n",(0,i.jsx)(n.li,{children:"Design a simple AI agent that controls a robot via ROS topics/services"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"the-bridge-between-ai-and-robotics",children:"The Bridge Between AI and Robotics"}),"\n",(0,i.jsx)(n.p,{children:"Modern robotics increasingly relies on AI for perception, decision-making, and planning. Python is a popular language for AI development due to its rich ecosystem of libraries like TensorFlow, PyTorch, and scikit-learn. rclpy serves as the bridge between these AI capabilities and the ROS control systems."}),"\n",(0,i.jsx)(n.h2,{id:"understanding-rclpy",children:"Understanding rclpy"}),"\n",(0,i.jsx)(n.p,{children:"rclpy is the Python client library for ROS 2. It provides Python bindings for the ROS 2 client library, allowing Python programs to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create and manage ROS nodes"}),"\n",(0,i.jsx)(n.li,{children:"Publish and subscribe to topics"}),"\n",(0,i.jsx)(n.li,{children:"Create and use services"}),"\n",(0,i.jsx)(n.li,{children:"Work with parameters and actions"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"code-example-ai-agent-node",children:"Code Example: AI Agent Node"}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of a simple AI agent node that processes sensor data and sends commands to control a robot:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import LaserScan\r\nfrom geometry_msgs.msg import Twist\r\nimport numpy as np\r\n\r\n\r\nclass SimpleAIAgent(Node):\r\n    def __init__(self):\r\n        super().__init__('simple_ai_agent')\r\n        \r\n        # Create subscription to laser scan data\r\n        self.subscription = self.create_subscription(\r\n            LaserScan,\r\n            'scan',\r\n            self.laser_callback,\r\n            10)\r\n        \r\n        # Create publisher for velocity commands\r\n        self.publisher = self.create_publisher(Twist, 'cmd_vel', 10)\r\n        \r\n        self.get_logger().info('AI Agent initialized')\r\n\r\n    def laser_callback(self, msg):\r\n        # Simple AI logic to process laser data and decide on movement\r\n        # This is a basic algorithm to avoid obstacles\r\n        \r\n        # Get the range data from laser scan\r\n        ranges = np.array(msg.ranges)\r\n        \r\n        # Remove invalid measurements (inf, nan) and get minimum distance\r\n        valid_ranges = ranges[np.isfinite(ranges)]\r\n        if len(valid_ranges) > 0:\r\n            min_distance = np.min(valid_ranges)\r\n        else:\r\n            min_distance = float('inf')\r\n        \r\n        # Create Twist message for robot movement\r\n        cmd = Twist()\r\n        \r\n        # Simple logic: if obstacle is close, turn; otherwise move forward\r\n        if min_distance < 1.0:  # obstacle within 1 meter\r\n            cmd.linear.x = 0.0\r\n            cmd.angular.z = 0.5  # turn right\r\n        else:\r\n            cmd.linear.x = 0.5  # move forward\r\n            cmd.angular.z = 0.0\r\n        \r\n        # Publish the command\r\n        self.publisher.publish(cmd)\r\n        self.get_logger().info(f'Published command: linear={cmd.linear.x}, angular={cmd.angular.z}')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    ai_agent = SimpleAIAgent()\r\n    \r\n    try:\r\n        rclpy.spin(ai_agent)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        ai_agent.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"code-example-ai-agent-with-service-call",children:"Code Example: AI Agent with Service Call"}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of an AI agent that uses a service to request specific robot actions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Pose\r\nfrom std_srvs.srv import SetBool\r\nimport random\r\n\r\n\r\nclass ServiceBasedAIAgent(Node):\r\n    def __init__(self):\r\n        super().__init__('service_based_ai_agent')\r\n        \r\n        # Create client for a hypothetical navigation service\r\n        self.nav_service_client = self.create_client(SetBool, 'navigation_service')\r\n        \r\n        # Wait for service to be available\r\n        while not self.nav_service_client.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('Navigation service not available, waiting again...')\r\n        \r\n        # Timer to periodically trigger AI decisions\r\n        self.timer = self.create_timer(5.0, self.make_decision)\r\n    \r\n    def make_decision(self):\r\n        # Simple AI decision making\r\n        action = random.choice(['move_forward', 'turn_left', 'turn_right', 'stop'])\r\n        \r\n        self.get_logger().info(f'AI decision: {action}')\r\n        \r\n        # Call navigation service based on decision\r\n        future = self.nav_service_client.call_async(self.create_service_request(action))\r\n        future.add_done_callback(self.service_callback)\r\n    \r\n    def create_service_request(self, action):\r\n        request = SetBool.Request()\r\n        # Encode action in the request (simplified for example)\r\n        request.data = action == 'move_forward'  # Example mapping\r\n        return request\r\n    \r\n    def service_callback(self, future):\r\n        try:\r\n            response = future.result()\r\n            if response.success:\r\n                self.get_logger().info('Navigation command executed successfully')\r\n            else:\r\n                self.get_logger().info(f'Navigation command failed: {response.message}')\r\n        except Exception as e:\r\n            self.get_logger().error(f'Service call failed: {e}')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    ai_agent = ServiceBasedAIAgent()\r\n    \r\n    try:\r\n        rclpy.spin(ai_agent)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        ai_agent.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices-for-ai-ros-integration",children:"Best Practices for AI-ROS Integration"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Keep AI processing separate from critical safety functions when possible"}),"\n",(0,i.jsx)(n.li,{children:"Implement proper error handling and fallback behaviors"}),"\n",(0,i.jsx)(n.li,{children:"Use appropriate QoS settings for different types of data"}),"\n",(0,i.jsx)(n.li,{children:"Consider computational requirements when deploying on robot platforms"}),"\n",(0,i.jsx)(n.li,{children:"Log AI decisions and robot responses for debugging and training"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"In this lesson, we explored how to bridge Python-based AI agents with ROS controllers using rclpy. We created examples of AI agents that process sensor data to control robot movement and demonstrated how to integrate AI decision-making with ROS services. This integration is fundamental to creating intelligent robotic systems."}),"\n",(0,i.jsx)(n.h2,{id:"previous-steps",children:"Previous Steps"}),"\n",(0,i.jsxs)(n.p,{children:["Go back to ",(0,i.jsx)(n.a,{href:"./lesson-2-ros2-nodes-topics-services",children:"Lesson 2: ROS 2 Nodes, Topics, and Services"})," to review the fundamental communication patterns in ROS 2."]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.p,{children:["Continue to ",(0,i.jsx)(n.a,{href:"./lesson-4-understanding-urdf",children:"Lesson 4: Understanding URDF"})," to learn about the Unified Robot Description Format for describing humanoid robots."]})]})}function g(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);